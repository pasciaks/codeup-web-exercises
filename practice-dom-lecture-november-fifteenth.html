<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM</title>

    <style>
        /*NOTE: style tag must be in head, but should be in external files*/

        div {
            border: 1px dotted grey;
        }

    </style>

</head>

<body>

<div style="height:500px;width:500px;border:1px solid green;"></div>

<div id="main-container">

    <h1>Hello there!</h1>

</div>

<div id="info"></div>

<!--Note: script tag should be in body, but better if external file-->

<script defer>

    let alreadyLost = false;

    function mouseMoveOnElement(e) {
        console.log(JSON.stringify(e.target.id, null, 2));
        document.querySelectorAll('.target').forEach((element) => {
            element.style.background = 'blue';
            alreadyLost = true;
            // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener
        })
    }

    function createAndAdd(index) {
        let element = document.createElement('div');
        element.id = `${arrayOfElements.length}`;
        element.style.position = 'absolute';
        element.style.left = (Math.floor(Math.random() * 490) + 10) + 'px';
        element.style.top = (Math.floor(Math.random() * 490) + 10) + 'px';
        element.style.width = '10px';
        element.style.height = '10px';
        element.style.background = 'red';
        element.classList.add('target');
        document.body.append(element);
        if (index !== randomIndex) {
            element.addEventListener('mousemove', mouseMoveOnElement);
        }
        arrayOfElements.push(element);
    }

    let arrayOfElements = [];

    let randomIndex = Math.floor(Math.random() * 555);

    for (let i = 0; i < 555; i++) {
        createAndAdd(i);
    }

    arrayOfElements[randomIndex].classList.remove('target');
    arrayOfElements[randomIndex].style.background = "green";
    arrayOfElements[randomIndex].style.zIndex = "1000";

    arrayOfElements[randomIndex].addEventListener('mousemove', function () {
        if (!alreadyLost) {
            alert("You win!");
            document.write('');
        }
    });

    // document.getElementsByTagName('h1')[0].innerText = "School is cool!";

    const h1 = document.querySelector("h1");
    const container = document.querySelector('#main-container');

    h1.innerHTML = `<strong>H</strong>ello <em>T</em>here!`;

    let containerHasAnId = container.hasAttribute("id");
    let theContainerId = container.getAttribute("id");

    console.log({containerHasAnId, theContainerId});

    container.setAttribute('data-dbid', '1');

    // let okButton = document.getElementById('btn-ok');
    // okButton.setAttribute('disabled', "true");
    // okButton.removeAttribute('disabled');

    let result = container.dataset;
    console.log(result);

    // https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_node_appendchild

    container.addEventListener('mousemove', (event) => {

        let {screenX, screenY, clientX, clientY, isTrusted} = event;

        document.getElementById('info').innerHTML = JSON.stringify({
            screenX,
            screenY,
            clientX,
            clientY,
            isTrusted
        }, null, 2)

        // container.style.background = 'red';

    });

    container.addEventListener('mouseenter', (event) => {
        container.style.background = 'yellow';
    });

    container.addEventListener('mouseleave', (event) => {
        container.style.background = 'white';
    });

    // Mouse buttons
    document.addEventListener('mousedown', e => console.log(e.buttons))

    // Keyboard keys
    document.addEventListener('keydown', e => console.log(e.key))

</script>

</body>

</html>