<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Online Store</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" rel="stylesheet">
    <link href="css/default-bootstrap-stylesheet.css" rel="stylesheet">
</head>

<body>

<h1 class="text-center">My Tool Store</h1>

<div class="container">
    <div class="row">
        <div class="col">
            <table class="table table-striped" id="products">
                <thead>
                <tr>
                    <th>Title</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Categories</th>
                </tr>
                </thead>
                <tbody id="insertProducts"></tbody>
            </table>
        </div>
    </div>
</div>


<script crossorigin="anonymous"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    "use strict";

    // External source code references: https://www.freecodecamp.org/news/how-to-format-number-as-currency-in-javascript-one-line-of-code/
    // Format the price above to USD using the locale, style, and currency.
    let USDollar = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
    });

    // TODO: Create an AJAX GET request for the file under data/inventory.json

    fetch('./data/inventory.json')
        .then(response => response.json())
        .then(data => {

            // TODO: Take the data from inventory.json and append it to the products table
            // HINT: Your data should come back as a JSON object; use console.log() to inspect
            //       its contents and fields

            let html = '';

            let rowTemplate = `<tr>
                <td>{{title}}</td>
                <td>{{quantity}}</td>
                <td>{{price}}</td>
                <td>{{categories}}</td>
                </tr>`;

            data.forEach(product => {
                console.log(product);
                let {title, quantity, price, categories} = product;
                console.log({title, quantity, price, categories});
                html += rowTemplate
                    .replace('{{title}}', title)
                    .replace('{{quantity}}', quantity)
                    .replace('{{price}}', USDollar.format(price || 0))
                    .replace('{{categories}}', categories.join(', '));
            });

            // HINT: You will want to target #insertProducts for your new HTML elements
            document.querySelector('#insertProducts').innerHTML = html;

        })
        .catch(error => console.error(error));

    /*

        Ajax Store
        [x] Download and save ajax-store.html.
        [x] Create a data directory and download inventory.json to that folder.
        [x] Your online tool store should load data from the JSON file using a get request and append the data to the table.
        As explained in the lesson, you will need to use fetch and a couple of .then() calls.
        [x] Add some new entries to inventory.json and see how the data on the page gets updated.
        [x] Make your store look better using custom CSS and/or Bootstrap

     */


</script>

</body>
</html>
